## 스프링 삼각형

### 1. 개요

스프링을 이루는 핵심 요소 3개를 스프링의 삼각형이라고 부른다.
3개 요소는 IoC/DI, AOP, PSA 이다.

### 2. IoC/DI

IoC의 약어는 Inversion Of Control로 직역하면 제어의 역전이다.
DI의 약어는 Dependency Injection으로 직역하면 의존성 주입이다.
IoC와 DI는 서로 같은 개념을 가졌지만, 그 개념을 담는 의미로써 DI가 더 정확하기 때문에 DI라는 약어가 더 자주 사용된다.

#### 2.1 의존성이란?

> 운전자가 자동차를 생산한다.<br>
> 자동차는 내부적으로 타이어를 생산한다.

의사 코드가 이렇게 있을 때, Java 코드로 다음과 같이 표현할 수 있다.

```java
new Car();
Car 객체 생성자에서 new Tire();
```

위 코드에서 Car 객체가 Tire 객체에 의존하고 있다.
단순하게 보면 의존성은 **new**이다. new를 실행하는 Car와 Tire 사이에서 Car가 Tire에 의존하고 있기 때문이다.
결론적으로 전체가 부분을 의존한다고 표현할 수 있다. 더 깊이 들어가면 의존하는 객체와 의존되는 객체 사이의 집합(Aggregation) 관계와
구성(Composition) 관계로 구분할 수 있다.

> 집합 관계 : 부분이 전체와 다른 생명 주기를 가진다.<br>
> 예) 집 vs 냉장고

> 구성 관계 : 부분이 전체와 같은 생명 주기를 가진다. <br>
> 예) 사람 vs 심장

#### 2.2 의존성 주입이란?

주입이라는 말은 외부에서라는 뜻을 내포하고 있다.

```java
//Tire 은 인터페이스이다.
Tire tire = new KoreanTire();
Car car = new Car(tire);
```

위 코드를 보면 car 객체를 생성하고 생성자를 통해 tire 객체를 주입하고 있다.
주입이라는 말은 외부에서라는 뜻을 내포하고 있는 단어이다.
정리하면, **자동차 내부에서 타이어를 생산하는게 아니라 외부에서 생산된 타이어를 자동차에 장착하는 작업**이 주입이다.

##### 2.2.1 의존성 주입의 장점

의존성 주입을 사용하면 Tire 인터페이스를 구현한 어떤 객체이든 들어오기만 하면 작동되기 때문에 확장성이 좋아진다.
예를 들어, KoreanTire() 대신 ChinaTire()와 AmericanTire()가 새롭게 구현되어도 Tire 인터페이스를 구현하기만 하면 Car.java 코드를
변경할 필요 없이 사용할 수 있기 때문이다. 추가로 xml 설정 파일에 주입할 객체의 id와 type을 설정하고 스프링의 **@Autowired** 나 자바 표준
어노테이션인 **@Resource** 를 사용하면 xml 파일 변경만으로도 쉽게 코드 확장이 가능하다.

### 3. AOP

Aspect-Oriented Programming 의 약자이다. 직역하면 관점 지향 프로그래밍인데 이 말로는 AOP 개념 이해가 난해하다.
AOP는 OOP와 별개로 생각해야할 것이 아니다. 코드를 보다 더 객체 지향적으로 작성하기 위해 만들어진 보조 장치라고 생각해야한다.

AOP는 핵심 관심사와 횡단 관심사로 구성된다.
코드에서 항상 반복적으로 실행되는 부분을 횡단 관심사라고 하고 모듈별로 동작이 다른 부분을 핵심 관심사라 칭한다.

```java
DB 커넥션 준비
Statement 객체 준비

try{
    DB 커넥션 연결
    Statement 객체 세팅
    insert / update / delete / select 실행
}catch ...{
    예외 처리
}finally{
    DB 자원 반납
}

`print "`**`Hello world`**`";`
```

### 4. PSA

### 5. 참고 자료