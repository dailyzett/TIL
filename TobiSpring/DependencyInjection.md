# 의존 관계 주입(Dependency Injection)

## 1. IoC 와 DI

IoC 는 매우 넓은 의미에서 사용된다.
스프링을 IoC 컨테이너라고 해서는 스프링이 제공하는 기능의 특징을 명확하게 설명하지 못한다.

- 서블릿 컨테이너처럼 단순히 서버에서 동작하는 서비스 컨테이너라는 뜻?
- 단순히 IoC 개념이 적용된 템플릿 메서드 패턴을 이용해 만들어진 프레임워크라는 뜻?

그래서 몇몇 사람의 제안으로 스프링이 제공하는 IoC 의 핵심을 짚어주는 용어로 **의존관계 주입(DI)** 라는 단어가 탄생했다.

> 의존 관계 주입의 핵심
>> DI는 오브젝트 레퍼런스를 외부로부터 주입받고 이를 통해 다른 오브젝트와 동적으로 의존 관계가 만들어지는 것이 핵심이다.

### 1.1 런타임 의존 관계 설정

#### 1.1.1 의존 관계란?

두 개의 클래스가 의존 관계에 있다고 말할 때는 항상 방향성을 부여해야 한다.

![img.png](img.png)

이 그림의 뜻은 B가 변하면 A에 영향을 미친다는 뜻이다. 의존 관계는 방향성이 매우 중요하다.
A가 B에 의존하고 있지만, 반대로 B는 A에 의존하지 않는다. 즉, A와는 다르게 B는 A의 변화에 영향을 받지 않는다.

#### 1.1.2 의존 관계 주입이란?

인터페이스를 통해 설계 시점에 느슨한 의존관계를 갖는 경우, 런타임 시에 사용할 오브젝트가 어떤 클래스로 만든 것인지 미리 알 수 없다.
이 말은 클라이언트 코드 속에서는 직접적으로 드러나지 않는다는 뜻이다. 프로그램이 시작되고 클라이언트가 런타임 시에 의존 관계를 맺는 대상,
즉 실제 사용대상인 오브젝트를 **의존 오브젝트**라고 말한다.

> 의존관계 주입은 이렇게 구체적인 의존 오브젝트와 클라이언트 오브젝트를 런타임 시에 연결해주는 작업을 말한다.

정리하면 다음과 같다.

- 클래스 모델이나 코드에는 런타임 시점의 의존관계가 드러나지 않는다. 이를 위해 인터페이스에만 의존하고 있어야 한다.
- 런타임 시점의 의존관계는 컨테이너나 팩토리 같은 제 3의 존재가 결정한다.
- 의존관계는 사용할 오브젝트에 대한 레퍼런스를 외부에서 주입해줌으로써 만들어진다.




